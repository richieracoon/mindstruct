<div class="main">
  <h1 class="header">Mindmap</h1>
  <svg class="svg" [attr.height]="this.diagram.height">
    <line *ngFor="let k of this.diagram.kanten" [attr.x1]=k.knotenA.x [attr.y1]=k.knotenA.y [attr.x2]=k.knotenB.x [attr.y2]=k.knotenB.y [attr.stroke-width]=k.strokeWidth [attr.stroke]=k.color />
    <ellipse *ngFor="let k of this.diagram.knoten; let i = index" (click)="select(i)" [attr.cx]=k.x [attr.cy]=k.y [attr.rx]=k.rx [attr.ry]=k.ry [attr.stroke]=k.border [attr.stroke-width]=k.borderWidth [attr.fill]=k.color />
    <text *ngFor="let k of this.diagram.knoten" [attr.x]=k.x [attr.y]=k.y [attr.fill]=k.labelColor text-anchor="middle">{{k.label}}</text>
  </svg>
  <hr>
  <div *ngIf="this.diagram.highlightedID === -1" class="row svg-menu">
    <div class="col-md-3">
      <form>
        <div class="form-group">
          <label for="labelInput1">Knoten hinzufügen</label>
          <input [(ngModel)]="label" [ngModelOptions]="{standalone: true}" type="text" class="form-control" id="labelInput1" aria-describedby="labelInput1" placeholder="Knotenlabel">
        </div>
        <div class="mt-2">Nodefarbe: </div>
        <div class="mt-2">
          <input id="nodecolor" [(colorPicker)]="nodeColor" [style.background]="nodeColor"/>
        </div>
        <div class="mt-2">Schriftfarbe: </div>
        <div class="mt-2">
          <input id="labelcolor" [(colorPicker)]="labelColor" [style.background]="labelColor"/>
        </div>
        <div class="mt-2">Umrandungsfarbe: </div>
        <div class="mt-2">
          <input id="bordercolor" [(colorPicker)]="borderColor" [style.background]="borderColor"/>
        </div>
        <div class="mt-3">
          <input type="checkbox" class="form-check-input-inline ml-2" (change)="isLeaf=!isLeaf;" id="leafCheck">
          <label class="form-check-label" for="leafCheck">is Leaf?</label>
        </div>
        <div class="mt-3">
          <button  (click)="add()" type="submit" class="btn btn-primary mr-2">Submit</button>
        </div>
      </form>
    </div>
    <div class="col-md-3">
      <div *ngIf="isLeaf" class="col-auto my-1">
        <label class="mr-sm-2" for="inlineFormCustomSelect">Mögliche Parents:</label>
        <select #selecElem (change)="chosenParentID = selecElem.value" class="custom-select mr-sm-2 text" id="inlineFormCustomSelect">
          <option selected class="text">Choose...</option>
          <option class="text" *ngFor="let p of this.diagram.root.children; let i=index" [attr.value]=i>{{p.label}}</option>
        </select>
      </div>
    </div>
  </div>
  <div *ngIf="this.diagram.highlightedID !== -1" class="svg-menu row">
    <div class="col-md-3">
      <form>
        <div class="form-group">
          <label for="labelInput">Label ändern:</label>
          <input [(ngModel)]="label" [ngModelOptions]="{standalone: true}" type="text" class="form-control" id="labelInput" aria-describedby="labelHelp" placeholder="{{this.diagram.highlightedLabel}}">
        </div>
        <div class="mt-2">
          <p>Knoten-Farbe:</p>
          <input [(colorPicker)]="nodeColor" [style.background]="nodeColor"/>
          <p class="mt-2">Schriftfarbe:</p>
          <input [(colorPicker)]="labelColor" [style.background]="labelColor"/>
          <p class="mt-2">Umrandungsfarbe:</p>
          <input [(colorPicker)]="borderColor" [style.background]="borderColor"/>
        </div>
        <div class="mt-4">
          <button  (click)="edit()" type="submit" class="btn btn-primary mr-2">Speichern</button>
          <button  (click)="delete()" type="submit" class="btn btn-danger mr-2">Node löschen</button>
          <button  (click)="cancel()" type="submit" class="btn btn-secondary">Abbrechen</button>
        </div>
      </form>
    </div>
  </div>
  <hr>
</div>
